<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="employee">

	<!-- 이 영역에 sql문에 맞는 태그를 사용하여 SQL문을 기술한다 사용할 수 있는 기본적인 태그들 <select> ~~~ </select> 
		<insert> ~~~ </insert> <update> ~~~ </update> <delete> ~~~ </delete> 위 태그에서 
		사용되는 속성들 1) id : 해당 태그를 호출할 때 namespace와 연결하여 사용하는 이름 어떤타입인지 알려주는거? 파라미터값이 
		뭔지 알려주는거? 이게 map타입이다? ? ..? result타입 -> select일때만 결국 mymatics가 해야되는 작업 = 
		2) parameterType : SQL문에 사용될 데이터가 들어있는 객체타입을 지정한다 (보통VO클래스, 자바의 자료형이름 등이 
		사용된다); (typeAlias로 지정한 alias명을 사용할 수 있다) 3) resultType : select문으 실행한 결과를 
		담을 객체타입을 지정한다 (보통 VO클래스나 자바의 자료형이름을 사용한다) (typeAlias로 지정한 alias명을 사용할 수 있다) 
		4) resultMap : 결과 레코드 컬럼명과 VO객체의 property명이 다를 경우에 적절한 매핑을 위해 사용한다 -->
		
	<select id="loginCheck" resultMap="empMap" parameterType="empvo">
		select * from employee
		where emp_no = #{empNo}
		  and emp_pw = #{empPw}
		<!-- select * from mymember 이러면 하나도 못가져옴, 우리가 만들 컬럼 이름과 db가 만든 컬럼이름이 달라서 
			못가져옴 -->
	</select>
	
	<insert id="joinEmployee" parameterType="empvo">
		insert into employee
			(emp_no, emp_pw, emp_addr, emp_tel, emp_email, emp_name, emp_posit, emp_state, admin_code, dept_code)
        values (#{empNo}, #{empPw}, #{empAddr}, #{empTel}, #{empEmail}, #{empName}, #{empPosit}, #{empState}, #{adminCode}, 1)
	</insert>

	<select id="forgotPw" resultMap="empMap" parameterType="empvo">
		select * from employee
		where emp_no = #{empNo}
		 and emp_tel = #{empTel}
	</select>
	
	
	<resultMap type="vo.EmpVO" id="empMap">
		<result column="emp_no" property="empNo" />
		<result column="emp_pw" property="empPw" />
		<result column="emp_addr" property="empAddr" />
		<result column="emp_tel" property="empTel" />
		<result column="emp_email" property="empEmail" />
		<result column="emp_name" property="empName" />
		<result column="emp_posit" property="empPosit" />
		<result column="emp_state" property="empState" />
		<result column="admin_code" property="adminCode" />
		<result column="dept_code" property="deptCode" />
	</resultMap>

</mapper>